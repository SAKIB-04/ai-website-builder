import React, { useState } from 'react';

const templates = {
  portfolio: (name = 'John Doe') => `
    <html>
    <head>
      <title>${name}'s Portfolio</title>
      <style>
        body { font-family: sans-serif; padding: 2em; background: #f9f9f9; }
        h1 { color: #333; }
        .section { margin-bottom: 2em; }
      </style>
    </head>
    <body>
      <h1>Welcome to ${name}'s Portfolio</h1>
      <div class="section">
        <h2>About Me</h2>
        <p>I am a passionate web developer and designer.</p>
      </div>
      <div class="section">
        <h2>Projects</h2>
        <ul>
          <li>Project 1 - Personal Website</li>
          <li>Project 2 - Mobile App</li>
        </ul>
      </div>
      <div class="section">
        <h2>Contact</h2>
        <p>Email: me@example.com</p>
      </div>
    </body>
    </html>
  `,

  business: (name = 'Your Business') => `
    <html>
    <head>
      <title>${name}</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 2em; background: #eef; }
        h1 { color: #003366; }
        .section { margin-bottom: 2em; }
      </style>
    </head>
    <body>
      <h1>Welcome to ${name}</h1>
      <div class="section">
        <h2>Our Services</h2>
        <p>We provide quality services to grow your business.</p>
      </div>
      <div class="section">
        <h2>Contact Us</h2>
        <p>Email: contact@${name.toLowerCase().replace(/\s/g, '')}.com</p>
      </div>
    </body>
    </html>
  `
};

const App = () => {
  const [command, setCommand] = useState('');
  const [htmlCode, setHtmlCode] = useState('');
  const [showPreview, setShowPreview] = useState(false);

  const generateSite = () => {
    const lowerCommand = command.toLowerCase();
    let html = '';
    if (lowerCommand.includes('portfolio')) {
      html = templates.portfolio();
    } else if (lowerCommand.includes('business') || lowerCommand.includes('shop')) {
      html = templates.business();
    } else {
      html = '<p>Sorry, I do not understand that type of website yet.</p>';
    }
    setHtmlCode(html);
    setShowPreview(false); // Hide preview when regenerating
  };

  return (
    <div className="p-4 max-w-xl mx-auto">
      <h1 className="text-2xl font-bold mb-4">AI Website Builder</h1>
      <input
        className="border p-2 w-full mb-4"
        placeholder="Describe your website (e.g., make me a portfolio site)"
        value={command}
        onChange={(e) => setCommand(e.target.value)}
      />
      <div className="flex gap-4 mb-4">
        <button
          className="bg-blue-600 text-white px-4 py-2 rounded"
          onClick={generateSite}
        >
          Generate Website
        </button>
        <button
          className="bg-green-600 text-white px-4 py-2 rounded"
          disabled={!htmlCode}
          onClick={() => setShowPreview(!showPreview)}
        >
          {showPreview ? 'Hide Preview' : 'Preview'}
        </button>
      </div>
      <div className="mt-6">
        <h2 className="text-xl font-semibold mb-2">Generated HTML:</h2>
        <textarea
          className="w-full h-80 p-2 border"
          value={htmlCode}
          readOnly
        ></textarea>
      </div>
      {showPreview && (
        <div className="mt-6 border p-4">
          <h2 className="text-xl font-semibold mb-2">Website Preview:</h2>
          <iframe
            title="Website Preview"
            srcDoc={htmlCode}
            sandbox="allow-same-origin allow-scripts"
            className="w-full h-[400px] border"
          />
        </div>
      )}
    </div>
  );
};

export default App;
